# Table of Contents Block Plugin

The Table of Contents Block plugin adds an Illinois-branded table of contents block to your WordPress site. The plugin relies on styles and components in the toolkit, so it should be used with the WIGG WordPress theme.

## Basic Use
1. Download il-table-of-contents.zip.
2. Navigate to your WordPress plugins dashboard and upload the zip file.
3. Activate the Table of Contents Block plugin.
4. Add the Table of Contents block to a page with headings.
5. Adjust block settings if neccessary.
   - Align the block left, center, or right within the block toolbar.
   - Toggle sticky positioning in the block settings sidebar. 

**Notes:** 
- The block targets headings generated by the WordPress core heading block. It looks for a class named "wp-block-heading", so if you add a custom heading without the "wp-block-heading" class, it will not be included in the table of contents and may break the component.
- Headings must also be in a logical order for the table of contents to work. For example, H2's always start a new section. So, jumping from an H1 to an H3 will break the component.

## Development
1. Clone this repo.
2. Add the il-table-of-contents folder to the plugins folder of your local WordPress installation or use `wp-env`.
3. Run `npm install`.
4. Run `npm start` and make any necessary changes.
   - If you make changes to save.js or TOCPanel.js and plan on re-uploading this plugin to a site already using the Table of Contents Block, save the original markup in deprecated.js. This should prevent *"This block contains unexpected or invalid content"* error message messages in the editor. See the [block deprecation tutorial](https://developer.wordpress.org/news/2023/03/block-deprecation-a-tutorial/) for more information.
5. Once you are done making changes, run `npm run build`.
6. Run `npm run plugin-zip` to create a zip file that can be uploaded to your live site via the WordPress plugin dashboard.