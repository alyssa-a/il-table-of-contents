(()=>{"use strict";const e=window.wp.element,t=document.getElementById("toc");(0,e.createRoot)(t).render((0,e.createElement)((()=>{const t=document.querySelectorAll("#primary .wp-block-heading");t.forEach((e=>{if(!e.hasAttribute("id")){let t=e.innerText.trim().replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"");e.setAttribute("id",t)}}));const l=Array.from(t).map((e=>({id:e.id,text:e.innerText,level:Number(e.nodeName.charAt(1)),children:[]}))),o=t=>t.map((t=>(0,e.createElement)(e.Fragment,null,t.children.length>0?(0,e.createElement)("li",{key:t.id},(0,e.createElement)("a",{href:"#"+t.id},t.text),(0,e.createElement)("ol",null,o(t.children))):(0,e.createElement)("li",{key:t.id},(0,e.createElement)("a",{href:"#"+t.id},t.text))))),n=(e=>{e=e.reverse();let t=[];return e.forEach(((l,o)=>{if(2==l.level)t.push(l);else for(let t=o;t<e.length;t++)if(e[t].level<l.level){e[t].children.unshift(l);break}})),t.reverse()})(l);return(0,e.createElement)("ol",null,o(n))}),null)),document.documentElement.style.setProperty("--scrollbar-width",window.innerWidth-document.documentElement.offsetWidth+"px"),document.getElementById("il-toc-btn").onclick=()=>{const e=document.getElementById("il-toc-panel"),t=e.querySelector(".il-toc-panel-content"),l=e.querySelectorAll(".il-toc-close-btn"),o=e.querySelectorAll("#toc a"),n=!0===window.matchMedia("(prefers-reduced-motion: reduce)")||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches,r=()=>{n?e.style.display="none":(t.classList.remove("slide-in"),e.style.overflowY="hidden",setTimeout((()=>{e.style.overflowY="hidden",e.style.display="none"}),"300")),document.body.classList.remove("no-scroll"),e.setAttribute("aria-hidden","true"),e.removeAttribute("aria-modal"),e.removeAttribute("role")};document.body.classList.add("no-scroll"),document.body.addEventListener("touchmove",(e=>{e.preventDefault()})),e.style.display="block",e.style.overflowY="auto",e.scrollTop=0,e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.removeAttribute("aria-hidden"),n||t.classList.add("slide-in"),l.forEach((e=>{e.onclick=()=>{r()}})),e.onclick=t=>{t.target==e&&r()},o.forEach((e=>{e.onclick=t=>{if(n)r();else{t.preventDefault();const l=e.getAttribute("href"),o={hash:l};document.querySelector(l).scrollIntoView({behavior:"smooth"}),window.history.pushState(o,document.title,e.getAttribute("href")),r()}}})),e.focus(),document.addEventListener("keydown",(t=>{"Escape"===t.key&&r(),t.shiftKey&&"Tab"===t.key?document.activeElement!==e&&document.activeElement!==l[0]||(t.preventDefault(),l[1].focus()):"Tab"===t.key&&document.activeElement===l[1]&&(t.preventDefault(),l[0].focus())}))};const l=document.getElementById("il-toc-btn-wrapper");if(l.classList.contains("toc-btn-sticky")){const e=l.getBoundingClientRect().top;let t=!1;document.addEventListener("scroll",(()=>{let o=window.scrollY;o>e&&!t?(l.classList.add("fixed-top"),t=!0):o<e&&t&&(l.classList.remove("fixed-top"),t=!1)}))}})();