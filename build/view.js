(()=>{"use strict";const e=window.wp.element,t=document.querySelectorAll("#primary .wp-block-heading");t.forEach((e=>{if(!e.hasAttribute("id")){let t=e.innerText.trim().replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"");e.setAttribute("id",t)}}));const n=Array.from(t).map((e=>({id:e.id,text:e.innerText,level:Number(e.nodeName.charAt(1)),listNumber:"",children:[]}))),l=document.getElementById("toc");(0,e.createRoot)(l).render((0,e.createElement)((({headingObjs:t})=>{(0,e.useEffect)((()=>{const e=new Event("rendered");document.dispatchEvent(e)}),[]);const n=t=>t.map((t=>(0,e.createElement)(e.Fragment,null,t.children.length>0?(0,e.createElement)("li",{key:t.id},(0,e.createElement)("span",{className:"il-toc-list-number"},t.listNumber,".")," ",(0,e.createElement)("a",{href:"#"+t.id},t.text),(0,e.createElement)("ol",null,n(t.children))):(0,e.createElement)("li",{key:t.id},(0,e.createElement)("span",{className:"il-toc-list-number"},t.listNumber,".")," ",(0,e.createElement)("a",{href:"#"+t.id},t.text))))),l=(e=>{const t=e.slice().reverse();let n=[];t.forEach(((e,l)=>{if(2==e.level)n.push(e);else for(let n=l;n<t.length;n++)if(t[n].level<e.level){t[n].children.unshift(e);break}})),n.reverse();const l=(e,t)=>{e.forEach(((e,n)=>{n++,e.listNumber=t?`${t.listNumber}.${n}`:`${n}`,e.children.length>0&&l(e.children,e)}))};return l(n),n})(t);return(0,e.createElement)("ol",null,n(l))}),{headingObjs:n})),document.addEventListener("rendered",(()=>{"true"===document.querySelector(".wp-block-create-block-il-table-of-contents").dataset.showNumbers&&t.forEach(((e,t)=>{e.insertAdjacentHTML("afterbegin",`<span class="il-toc-heading-number">${n[t].listNumber}.</span> `)}))})),document.documentElement.style.setProperty("--scrollbar-width",window.innerWidth-document.documentElement.offsetWidth+"px");const r=document.getElementById("il-toc-btn");r.onclick=()=>{const e=document.getElementById("il-toc-panel"),t=e.querySelector(".il-toc-panel-content"),n=e.querySelectorAll(".il-toc-close-btn"),l=e.querySelectorAll("#toc a"),o=!0===window.matchMedia("(prefers-reduced-motion: reduce)")||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches,c=()=>{o?e.style.display="none":(t.classList.remove("slide-in"),e.style.overflowY="hidden",setTimeout((()=>{e.style.overflowY="hidden",e.style.display="none"}),"300")),document.body.classList.remove("no-scroll"),e.setAttribute("aria-hidden","true"),e.removeAttribute("aria-modal"),e.removeAttribute("role"),r.focus()};document.body.classList.add("no-scroll"),document.body.addEventListener("touchmove",(e=>{e.preventDefault()})),e.style.display="block",e.style.overflowY="auto",e.scrollTop=0,e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.removeAttribute("aria-hidden"),o||t.classList.add("slide-in"),n.forEach((e=>{e.onclick=()=>{c()}})),e.onclick=t=>{t.target==e&&c()},l.forEach((e=>{e.onclick=t=>{if(o)c();else{t.preventDefault();const n=e.getAttribute("href"),l=document.querySelector(n),r={hash:n};c(),l.scrollIntoView({behavior:"smooth"}),window.history.pushState(r,document.title,n)}}})),e.focus(),document.addEventListener("keydown",(t=>{"Escape"===t.key&&c(),t.shiftKey&&"Tab"===t.key?document.activeElement!==e&&document.activeElement!==n[0]||(t.preventDefault(),n[1].focus()):"Tab"===t.key&&document.activeElement===n[1]&&(t.preventDefault(),n[0].focus())}))};const o=document.getElementById("il-toc-btn-wrapper");if(o.classList.contains("toc-btn-sticky")){const e=o.getBoundingClientRect().top;let t=!1;document.addEventListener("scroll",(()=>{let n=window.scrollY;n>e&&!t?(o.classList.add("fixed-top"),t=!0):n<e&&t&&(o.classList.remove("fixed-top"),t=!1)}))}})();